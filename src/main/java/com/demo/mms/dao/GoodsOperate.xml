<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.demo.mms.dao.GoodsOperateMapper">
    <resultMap id="tempGoodsWithClassifyVO" type="com.demo.mms.common.vo.StoreSelledClassifyVO">
    </resultMap>

    <select id="queryGoodsWithClassify" parameterType="String" resultMap="tempGoodsWithClassifyVO" >
        select DISTINCT
            classify_id,
            classify_name,
            parent_id 
        from store_sell_classify NATURAL JOIN goods_classify
        where store_id = #{store_id}
    </select>

    <resultMap id="tempStoreGoodsChartByClassifyVO" type="com.demo.mms.common.vo.StoreGoodsChartByClassifyVO">
    </resultMap>
    <select id="queryStoreGoodsChartByClassify" parameterType="String" resultMap="tempStoreGoodsChartByClassifyVO">
        SELECT A.id as selled_id,
              classify_name,
              goods_id
        FROM (SELECT goods_classify.classify_id,classify_name,store_sell_classify.id
              FROM store_sell_classify  LEFT JOIN goods_classify ON goods_classify.classify_id = store_sell_classify.classify_id
              WHERE store_id=#{store_id}) AS A LEFT JOIN classify_of_goods ON A.id=classify_of_goods.classify_selled_id
    </select>

    <resultMap id="queryAllGoodsOfStoreVO" type="com.demo.mms.common.domain.Goods">
    </resultMap>
    <select id="queryAllGoodsOfStore" parameterType="String" resultMap="queryAllGoodsOfStoreVO" >
        select *
        from goods
        where store_id = #{store_id}
    </select>
    <select id="queryAllGoodsOfStore_specialClass" parameterType="String" resultMap="queryAllGoodsOfStoreVO" >
        SELECT
          goods.goods_id,
          goods_name,
          goods.old_level,
          goods.pic_url,
          goods.status,
          goods.description,
          goods.store_id,
          goods.create_time,
          goods.update_time
        FROM goods,classify_of_goods, store_sell_classify,goods_classify
        where goods.store_id=#{store_id} AND goods_classify.classify_name=#{classify_name} AND
              goods.goods_id=classify_of_goods.goods_id AND
              classify_of_goods.classify_selled_id=store_sell_classify.id AND
              store_sell_classify.classify_id=goods_classify.classify_id
    </select>
    <!--<resultMap id="returnGoodsOfStore" type="com.demo.mms.common.domain.Goods" ></resultMap>-->
    <!--<select id="queryGoodsOfStore" parameterType="String" resultMap="returnGoodsOfStore">-->
        <!--select *-->
        <!--FROM goods-->
        <!--WHERE store_id=#{store_id}-->
    <!--</select>-->
    
    
    <!--<resultMap id="Goods" type="com.demo.mms.common.domain.Goods">-->
    <!--</resultMap>-->
    <!--<select id="queryGoods" parameterType="String" resultMap="Goods" >-->
        <!--select-->
            <!--goods_id,-->
            <!--classify_id-->
        <!--from Goods where Goods.store_id = #{store_id}-->
    <!--</select>-->


    <!--<select id="queryClassifyOfStore" parameterType="String" resultMap="tempGoodsWithClassifyVO" >-->
        <!--select-->
        <!--goods_id,-->
        <!--classify_id-->
        <!--from store_sell_classify NATURAL JOIN goods_classify-->
        <!--where store_id = #{store_id}-->
    <!--</select>-->
</mapper>